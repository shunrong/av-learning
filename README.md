# éŸ³è§†é¢‘å­¦ä¹ é¡¹ç›®

ç³»ç»Ÿæ¢³ç†å­¦ä¹ éŸ³è§†é¢‘é¢†åŸŸçŸ¥è¯†å’Œæ–¹æ¡ˆçš„å®è·µé¡¹ç›®ã€‚

## ğŸ“š é¡¹ç›®ç»“æ„

```
av-learning/
â”œâ”€â”€ index.html                    # åŸºç¡€æ‘„åƒå¤´è®¿é—®Demo
â”œâ”€â”€ 01-webrtc-1v1-demo/          # WebRTC 1å¯¹1è§†é¢‘é€šè¯
â”‚   â”œâ”€â”€ client.html              # å®¢æˆ·ç«¯é¡µé¢
â”‚   â”œâ”€â”€ server.js                # ä¿¡ä»¤æœåŠ¡å™¨
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ 02-webrtc-mesh-conference/   # Meshæ¶æ„å¤šäººä¼šè®®
â”‚   â”œâ”€â”€ client/                  # å®¢æˆ·ç«¯ï¼ˆæ¨¡å—åŒ–ï¼‰
â”‚   â”œâ”€â”€ server/                  # æœåŠ¡ç«¯ï¼ˆæˆ¿é—´ç®¡ç†ï¼‰
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ 03-live-streaming-basic/     # ç›´æ’­åŸºç¡€ï¼ˆRTMP + FLVï¼‰
â”‚   â”œâ”€â”€ server/                  # Node.js æµåª’ä½“æœåŠ¡å™¨
â”‚   â”œâ”€â”€ client/                  # æ’­æ”¾å™¨é¡µé¢
â”‚   â”œâ”€â”€ scripts/                 # æ¨æµè„šæœ¬
â”‚   â””â”€â”€ README.md
â””â”€â”€ README.md                     # æœ¬æ–‡ä»¶
```

## ğŸ¯ å­¦ä¹ è·¯å¾„

### é˜¶æ®µ1: WebRTC åŸºç¡€ âœ…

- [x] **åŸºç¡€æ‘„åƒå¤´è®¿é—®** (`index.html`)
  - getUserMedia API
  - æœ¬åœ°è§†é¢‘å±•ç¤º
  
- [x] **1å¯¹1è§†é¢‘é€šè¯** (`01-webrtc-1v1-demo/`)
  - WebRTC P2P è¿æ¥
  - ä¿¡ä»¤æœåŠ¡å™¨ï¼ˆWebSocketï¼‰
  - SDP äº¤æ¢
  - ICE å€™é€‰è€…

### é˜¶æ®µ2: å¤šäººä¼šè®® âœ…

- [x] **å¤šäººè§†é¢‘ä¼šè®®** (`02-webrtc-mesh-conference/`)
  - Mesh æ¶æ„å®ç°
  - å¤šä¸ª PeerConnection ç®¡ç†
  - æˆ¿é—´æ¦‚å¿µ
  - æ¨¡å—åŒ–ä»£ç è®¾è®¡
  
- [ ] **å±å¹•å…±äº«**
  - getDisplayMedia API
  - å¤šæµç®¡ç†

### é˜¶æ®µ3: ç›´æ’­æŠ€æœ¯ ğŸ”„

- [x] **ç›´æ’­åŸºç¡€** (`03-live-streaming-basic/`)
  - RTMP æ¨æµåè®®
  - HTTP-FLV æ‹‰æµæ’­æ”¾
  - FFmpeg æ¨æµå·¥å…·
  - flv.js æ’­æ”¾å™¨
  - å»¶è¿ŸåŸç†ç†è§£

- [ ] **HLS ç›´æ’­**
  - TS åˆ‡ç‰‡æœºåˆ¶
  - m3u8 ç´¢å¼•æ–‡ä»¶
  - è‡ªé€‚åº”ç ç‡ï¼ˆABRï¼‰
  
- [ ] **ä½å»¶è¿Ÿç›´æ’­**
  - WebRTC ç›´æ’­æ–¹æ¡ˆ
  - SRT åè®®
  - åè®®å¯¹æ¯”ä¸é€‰å‹

### é˜¶æ®µ4: WebRTC é«˜çº§ç‰¹æ€§ ğŸ“…

- [ ] **å¼±ç½‘ä¼˜åŒ–**
  - å¸¦å®½è‡ªé€‚åº”
  - ä¸¢åŒ…å¤„ç†
  - å»¶è¿Ÿç›‘æ§
  
- [ ] **ä¼šè®®å½•åˆ¶**
  - MediaRecorder API
  - æœåŠ¡ç«¯å½•åˆ¶

### é˜¶æ®µ5: ç”Ÿäº§çº§æ¶æ„ ğŸ“…

- [ ] **SFU æ¶æ„**
  - mediasoup é›†æˆ
  - Simulcast å®ç°
  
- [ ] **å®Œæ•´ä¼šè®®ç³»ç»Ÿ**
  - ç”¨æˆ·ç³»ç»Ÿ
  - æˆ¿é—´ç®¡ç†
  - æƒé™æ§åˆ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºç¡€æ‘„åƒå¤´è®¿é—®

```bash
# ä½¿ç”¨ä»»æ„ HTTP æœåŠ¡å™¨
npx http-server .
# è®¿é—® http://localhost:8080/index.html
```

### 2. 1å¯¹1è§†é¢‘é€šè¯

```bash
cd 01-webrtc-1v1-demo
npm install
npm start
# è®¿é—® http://localhost:3000
# æ‰“å¼€ä¸¤ä¸ªæ ‡ç­¾é¡µæµ‹è¯•
```

### 3. å¤šäººè§†é¢‘ä¼šè®®

```bash
cd 02-webrtc-mesh-conference/server
npm install
npm start
# è®¿é—® http://localhost:3000
# æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µæµ‹è¯•ï¼ˆå»ºè®® 2-4 äººï¼‰
```

### 4. ç›´æ’­ç³»ç»Ÿ

```bash
# å®‰è£… FFmpegï¼ˆæ¨æµå·¥å…·ï¼‰
brew install ffmpeg

# å¯åŠ¨æœåŠ¡å™¨
cd 03-live-streaming-basic
npm install
npm start

# æ–°å¼€ç»ˆç«¯ï¼Œæ¨æµæµ‹è¯•
ffmpeg -re -i test.mp4 -c copy -f flv rtmp://localhost:1935/live/stream

# è®¿é—® http://localhost:3000/player.html
```

## ğŸ“– æ ¸å¿ƒçŸ¥è¯†ç‚¹

### WebRTC ä¸‰å¤§ç»„ä»¶

1. **getUserMedia**: è·å–æœ¬åœ°åª’ä½“æµ
2. **RTCPeerConnection**: P2P è¿æ¥
3. **RTCDataChannel**: æ•°æ®é€šé“

### æ¶æ„æ¨¡å¼å¯¹æ¯”

| æ¶æ„ | é€‚ç”¨åœºæ™¯ | ä¼˜ç¼ºç‚¹ |
|------|---------|--------|
| Mesh (P2P) | 2-4äºº | å»¶è¿Ÿä½ï¼Œå¸¦å®½å‹åŠ›å¤§ |
| SFU | 5-30äºº | å¹³è¡¡æ€§èƒ½ï¼Œä¸»æµæ–¹æ¡ˆ |
| MCU | 30+äºº | å®¢æˆ·ç«¯å‹åŠ›å°ï¼ŒæœåŠ¡ç«¯æˆæœ¬é«˜ |

### WebRTC vs ç›´æ’­

| ç»´åº¦ | WebRTC | ä¼ ç»Ÿç›´æ’­ |
|------|--------|---------|
| å»¶è¿Ÿ | <500ms | 3-30ç§’ |
| åœºæ™¯ | åŒå‘äº’åŠ¨ | å•å‘å¹¿æ’­ |
| è§‚ä¼—æ•° | å—é™ | æµ·é‡ |
| åè®® | UDP/RTP | RTMP/HTTP |

### ç›´æ’­æ ¸å¿ƒæ¦‚å¿µ

- **æ¨æµ**: ä¸»æ’­ç«¯é‡‡é›†ã€ç¼–ç ã€ä¼ è¾“ï¼ˆRTMPã€SRTã€WebRTCï¼‰
- **æ‹‰æµ**: è§‚ä¼—ç«¯è¯·æ±‚ã€è§£ç ã€æ’­æ”¾ï¼ˆHTTP-FLVã€HLSã€RTSPï¼‰
- **ç¼–ç **: H.264/H.265/VP8/VP9
- **å°è£…**: FLVã€TSã€MP4
- **FFmpeg**: éŸ³è§†é¢‘å¤„ç†çš„ç‘å£«å†›åˆ€

### WebRTC å…³é”®æ¦‚å¿µ

- **ä¿¡ä»¤**: WebSocket ä¼ è¾“æ§åˆ¶æ¶ˆæ¯ï¼ˆSDPã€ICEï¼‰
- **åª’ä½“æµ**: WebRTC ç›´æ¥ P2P ä¼ è¾“
- **STUN/TURN**: NAT ç©¿é€æœåŠ¡å™¨
- **SDP**: æè¿°åª’ä½“ä¼šè¯
- **ICE**: äº¤äº’å¼è¿æ¥å»ºç«‹

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### WebRTC å®æ—¶é€šä¿¡
- **å‰ç«¯**: åŸç”Ÿ JavaScript (ES6+)
- **åç«¯**: Node.js + WebSocket
- **åè®®**: WebRTC (SRTP/SCTP)
- **æœªæ¥**: React, TypeScript, mediasoup

### ç›´æ’­ç³»ç»Ÿ
- **æµåª’ä½“æœåŠ¡å™¨**: Node.js + node-media-server
- **æ¨æµå·¥å…·**: FFmpeg
- **æ’­æ”¾å™¨**: flv.js / hls.js
- **åè®®**: RTMP (æ¨æµ) + HTTP-FLV/HLS (æ‹‰æµ)
- **ç¼–ç **: H.264 (è§†é¢‘) + AAC (éŸ³é¢‘)

## ğŸ“ å­¦ä¹ ç¬”è®°

æ¯ä¸ªå­é¡¹ç›®éƒ½æœ‰è¯¦ç»†çš„ READMEï¼ŒåŒ…å«ï¼š
- ä»£ç è¯¦è§£
- æ ¸å¿ƒæ¦‚å¿µ
- å¸¸è§é—®é¢˜
- ç»ƒä¹ å»ºè®®

## ğŸ“ å­¦ä¹ èµ„æº

### WebRTC
- [WebRTC å®˜æ–¹æ–‡æ¡£](https://webrtc.org/)
- [MDN WebRTC API](https://developer.mozilla.org/zh-CN/docs/Web/API/WebRTC_API)
- [WebRTC ç¤ºä¾‹ä»£ç ](https://webrtc.github.io/samples/)

### ç›´æ’­æŠ€æœ¯
- [FFmpeg å®˜æ–¹æ–‡æ¡£](https://ffmpeg.org/documentation.html)
- [flv.js GitHub](https://github.com/bilibili/flv.js)
- [RTMP åè®®è§„èŒƒ](https://rtmp.veriskope.com/docs/spec/)
- [é›·éœ„éª…çš„åšå®¢](https://blog.csdn.net/leixiaohua1020) - éŸ³è§†é¢‘æŠ€æœ¯

## ğŸ“Š è¿›åº¦è¿½è¸ª

- âœ… å®ŒæˆåŸºç¡€ Demo
- ğŸ”„ æ­£åœ¨è¿›è¡Œ
- ğŸ“… è®¡åˆ’ä¸­

---

**å­¦ä¹ åŸåˆ™ï¼šç†è®º â†’ å®è·µ â†’ æ€»ç»“ â†’ è¿­ä»£**

æ¯å®Œæˆä¸€ä¸ªé¡¹ç›®ï¼Œæ€»ç»“æ ¸å¿ƒçŸ¥è¯†ç‚¹å’Œè¸©è¿‡çš„å‘ã€‚

